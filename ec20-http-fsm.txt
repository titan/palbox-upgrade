+---------------------------+-----------+------------+-------------+-----------------------+-----------------------+------------------+------------------+---------------------------+-----------------+----------------------------+----------------+--------------------+--------------------+
| state\event               | open      | close      | get         | OK, headers != null   | OK, headers = null    | ERROR, retry > 0 | ERROR, retry = 0 | CONNECT                   | +CME ERROR: err | +QHTTPGET: err,code,length | DATA: len,data | TIMEOUT, retry > 0 | TIMEOUT, retry = 0 |
+---------------------------+-----------+------------+-------------+-----------------------+-----------------------+------------------+------------------+---------------------------+-----------------+----------------------------+----------------+--------------------+--------------------+
|                           | AT+QICSGP |            |             |                       |                       |                  |                  |                           |                 |                            |                |                    |                    |
|                           | ----      |            |             |                       |                       |                  |                  |                           |                 |                            |                |                    |                    |
| READY                     | QICSGPING |            |             |                       |                       |                  |                  |                           |                 |                            |                |                    |                    |
+---------------------------+-----------+------------+-------------+-----------------------+-----------------------+------------------+------------------+---------------------------+-----------------+----------------------------+----------------+--------------------+--------------------+
|                           |           |            |             | AT+QIACT              | AT+QIACT              | AT+QICSGP        |                  |                           |                 |                            |                | AT+QICSGP          |                    |
|                           |           |            |             | ----                  | ----                  | ----             |                  |                           |                 |                            |                | ----               |                    |
| QICSGPING                 |           |            |             | QIACTING              | QIACTING              | QICSGP ERROR     |                  |                           |                 |                            |                | QICSGP ERROR       |                    |
+---------------------------+-----------+------------+-------------+-----------------------+-----------------------+------------------+------------------+---------------------------+-----------------+----------------------------+----------------+--------------------+--------------------+
|                           |           |            |             | AT+QIACT              | AT+QIACT              | retry - 1        | reboot           |                           |                 |                            |                | retry - 1          | reboot             |
|                           |           |            |             | ----                  | ----                  | AT+QICSGP        | ----             |                           |                 |                            |                | AT+QICSGP          | ----               |
| QICSGP ERROR              |           |            |             | QIACTING              | QIACTING              | ----             | READY            |                           |                 |                            |                | ----               | READY              |
+---------------------------+-----------+------------+-------------+-----------------------+-----------------------+------------------+------------------+---------------------------+-----------------+----------------------------+----------------+--------------------+--------------------+
|                           |           |            |             | AT+QHTTPCFG contextid | AT+QHTTPCFG contextid | AT+QIACT         |                  |                           |                 |                            |                | AT+QIACT           |                    |
|                           |           |            |             | ----                  | ----                  | ----             |                  |                           |                 |                            |                | ----               |                    |
| QIACTING                  |           |            |             | QHTTPCFGING CONTEXTID | QHTTPCFGING CONTEXTID | QIACT ERROR      |                  |                           |                 |                            |                | QIACT ERROR        |                    |
+---------------------------+-----------+------------+-------------+-----------------------+-----------------------+------------------+------------------+---------------------------+-----------------+----------------------------+----------------+--------------------+--------------------+
|                           |           |            |             | AT+QHTTPCFG contextid | AT+QHTTPCFG contextid | retry - 1        | reboot           |                           |                 |                            |                | retry - 1          | reboot             |
|                           |           |            |             | ----                  | ----                  | AT+QIACT         | ----             |                           |                 |                            |                | AT+QIACT           | ----               |
| QIACT ERROR               |           |            |             | QHTTPCFGING CONTEXTID | QHTTPCFGING CONTEXTID | ----             | READY            |                           |                 |                            |                | ----               | READY              |
+---------------------------+-----------+------------+-------------+-----------------------+-----------------------+------------------+------------------+---------------------------+-----------------+----------------------------+----------------+--------------------+--------------------+
|                           |           |            |             |                       |                       |                  |                  |                           | error callback  |                            |                |                    | error callback     |
|                           |           |            |             | AT+QHTTPCFG header    |                       |                  |                  |                           | AT+QIDEACT      |                            |                |                    | AT+QIDEACT         |
|                           |           |            |             | ----                  | ----                  |                  |                  |                           | ----            |                            |                |                    | ----               |
| QHTTPCFGING CONTEXTID     |           |            |             | QHTTPCFGING HEADER    | QHTTPURL READY        |                  |                  |                           | QIDEACTING      |                            |                |                    | QIDEACTING         |
+---------------------------+-----------+------------+-------------+-----------------------+-----------------------+------------------+------------------+---------------------------+-----------------+----------------------------+----------------+--------------------+--------------------+
|                           |           |            |             |                       |                       |                  |                  |                           | error callback  |                            |                |                    |                    |
|                           |           |            |             |                       |                       |                  |                  |                           | AT+QIDEACT      |                            |                |                    |                    |
|                           |           |            |             | ----                  |                       |                  |                  |                           | ----            |                            |                |                    |                    |
| QHTTPCFGING HEADER        |           |            |             | QHTTPURL READY        |                       |                  |                  |                           | QIDEACTING      |                            |                |                    |                    |
+---------------------------+-----------+------------+-------------+-----------------------+-----------------------+------------------+------------------+---------------------------+-----------------+----------------------------+----------------+--------------------+--------------------+
|                           |           |            |             |                       |                       |                  |                  |                           |                 |                            |                |                    | error callback     |
|                           |           |            | AT+QHTTPURL |                       |                       |                  |                  |                           |                 |                            |                |                    | AT+QIDEACT         |
|                           |           |            | ----        |                       |                       |                  |                  |                           |                 |                            |                |                    | ----               |
| QHTTPURL READY            |           |            | QHTTPURLING |                       |                       |                  |                  |                           |                 |                            |                |                    | QIDEACTING         |
+---------------------------+-----------+------------+-------------+-----------------------+-----------------------+------------------+------------------+---------------------------+-----------------+----------------------------+----------------+--------------------+--------------------+
|                           |           |            |             |                       |                       |                  |                  | url                       |                 |                            |                |                    |                    |
|                           |           |            |             |                       |                       |                  |                  | ----                      |                 |                            |                |                    |                    |
| QHTTPURLING               |           |            |             |                       |                       |                  |                  | QHTTPURL DATA MODE        |                 |                            |                |                    |                    |
+---------------------------+-----------+------------+-------------+-----------------------+-----------------------+------------------+------------------+---------------------------+-----------------+----------------------------+----------------+--------------------+--------------------+
|                           |           |            |             |                       |                       |                  |                  |                           | error callback  |                            |                |                    |                    |
|                           |           |            |             | AT+HTTPGET headersize | AT+HTTPGET            |                  |                  |                           | AT+QIDEACT      |                            |                |                    |                    |
|                           |           |            |             | ----                  | ----                  |                  |                  |                           | ----            |                            |                |                    |                    |
| QHTTPURL DATA MODE        |           |            |             | QHTTPGET READY        | QHTTPGETING           |                  |                  |                           | QIDEACTING      |                            |                |                    |                    |
+---------------------------+-----------+------------+-------------+-----------------------+-----------------------+------------------+------------------+---------------------------+-----------------+----------------------------+----------------+--------------------+--------------------+
|                           |           |            |             |                       |                       |                  |                  |                           | error callback  |                            |                |                    | error callback     |
|                           |           |            |             |                       |                       |                  |                  | header                    | AT+QIDEACT      |                            |                |                    | AT+QIDEACT         |
|                           |           |            |             |                       |                       |                  |                  | ----                      | ----            |                            |                |                    | ----               |
| QHTTPGET READY            |           |            |             |                       |                       |                  |                  | QHTTPGET HEADER DATA MODE | QIDEACTING      |                            |                |                    | QIDEACTING         |
+---------------------------+-----------+------------+-------------+-----------------------+-----------------------+------------------+------------------+---------------------------+-----------------+----------------------------+----------------+--------------------+--------------------+
|                           |           |            |             |                       |                       |                  |                  |                           | error callback  |                            |                |                    |                    |
|                           |           |            |             |                       |                       |                  |                  |                           | AT+QIDEACT      |                            |                |                    |                    |
|                           |           |            |             | ----                  |                       |                  |                  |                           | ----            |                            |                |                    |                    |
| QHTTPGET HEADER DATA MODE |           |            |             | QHTTPGETING           |                       |                  |                  |                           | QIDEACTING      |                            |                |                    |                    |
+---------------------------+-----------+------------+-------------+-----------------------+-----------------------+------------------+------------------+---------------------------+-----------------+----------------------------+----------------+--------------------+--------------------+
|                           |           |            |             |                       |                       |                  |                  |                           | error callback  | set data len               |                |                    |                    |
|                           |           |            |             |                       |                       |                  |                  |                           | AT+QIDEACT      | AT+QHTTPREAD               |                |                    |                    |
|                           |           |            |             |                       |                       |                  |                  |                           | ----            | ----                       |                |                    |                    |
| QHTTPGETING               |           |            |             |                       |                       |                  |                  |                           | QIDEACTING      | QHTTPREADING               |                |                    |                    |
+---------------------------+-----------+------------+-------------+-----------------------+-----------------------+------------------+------------------+---------------------------+-----------------+----------------------------+----------------+--------------------+--------------------+
|                           |           |            |             |                       |                       |                  |                  |                           | error callback  |                            |                |                    |                    |
|                           |           |            |             |                       |                       |                  |                  | switch to copy mode       | AT+QIDEACT      |                            |                |                    |                    |
|                           |           |            |             |                       |                       |                  |                  | ----                      | ----            |                            |                |                    |                    |
| QHTTPREADING              |           |            |             |                       |                       |                  |                  | QHTTPREADING DATA MODE    | QIDEACTING      |                            |                |                    |                    |
+---------------------------+-----------+------------+-------------+-----------------------+-----------------------+------------------+------------------+---------------------------+-----------------+----------------------------+----------------+--------------------+--------------------+
|                           |           | AT+QIDEACT |             |                       |                       |                  |                  |                           |                 |                            | read callback  |                    |                    |
|                           |           | ----       |             |                       |                       |                  |                  |                           |                 |                            | ----           |                    |                    |
| QHTTPREADING DATA MODE    |           | QIDEACTING |             |                       |                       |                  |                  |                           |                 |                            | QHTTPURL READY |                    |                    |
+---------------------------+-----------+------------+-------------+-----------------------+-----------------------+------------------+------------------+---------------------------+-----------------+----------------------------+----------------+--------------------+--------------------+
|                           |           |            |             | clear                 | clear                 | AT+QIDEACT       |                  |                           |                 |                            |                | AT+QIDEACT         |                    |
|                           |           |            |             | ----                  | ----                  | ----             |                  |                           |                 |                            |                | ----               |                    |
| QIDEACTING                |           |            |             | READY                 | READY                 | QIDEACT ERROR    |                  |                           |                 |                            |                | QIDEACT ERROR      |                    |
+---------------------------+-----------+------------+-------------+-----------------------+-----------------------+------------------+------------------+---------------------------+-----------------+----------------------------+----------------+--------------------+--------------------+
|                           |           |            |             | clear                 | clear                 | retry - 1        | reboot           |                           |                 |                            |                | retry - 1          | reboot             |
|                           |           |            |             | ----                  | ----                  | AT+QIDEACT       | ----             |                           |                 |                            |                | AT+QIDEACT         | ----               |
| QIDEACT ERROR             |           |            |             | READY                 | READY                 | ----             | READY            |                           |                 |                            |                | ----               | READY              |
+---------------------------+-----------+------------+-------------+-----------------------+-----------------------+------------------+------------------+---------------------------+-----------------+----------------------------+----------------+--------------------+--------------------+
